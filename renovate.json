{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:recommended"],
  "labels": ["dependencies"],
  "separateMinorPatch": true,
  "packageRules": [
    {
      "matchUpdateTypes": ["patch"],
      "groupName": "all patch updates"
    },
    {
      "matchUpdateTypes": ["minor"],
      "groupName": "all minor updates"
    },
    {
      "matchManagers": ["github-actions"],
      "groupName": "GitHub Actions"
    },
    {
      "matchManagers": ["dockerfile", "docker-compose"],
      "groupName": "Docker"
    },
    {
      "description": "PostgreSQL - minor and patch only (major requires manual migration)",
      "matchManagers": ["dockerfile", "docker-compose"],
      "matchPackageNames": ["postgres"],
      "matchUpdateTypes": ["major"],
      "enabled": false
    },
    {
      "description": "Directus docker image",
      "matchManagers": ["dockerfile", "docker-compose"],
      "matchPackageNames": ["directus/directus"],
      "groupName": "Directus"
    },
    {
      "groupName": "React & Next.js",
      "matchPackagePatterns": ["^react", "^@types/react"],
      "matchPackageNames": ["next", "eslint-config-next", "next-themes"]
    },
    {
      "groupName": "Radix UI & Headless UI",
      "matchPackagePatterns": ["^@radix-ui", "^@headlessui"]
    },
    {
      "groupName": "Tailwind CSS",
      "matchPackagePatterns": ["^tailwind", "^@tailwindcss"],
      "matchPackageNames": ["postcss"]
    },
    {
      "groupName": "Styling utilities",
      "matchPackageNames": ["clsx", "class-variance-authority", "tailwind-merge"]
    },
    {
      "groupName": "Directus",
      "matchPackagePatterns": ["^@directus"]
    },
    {
      "groupName": "Testing",
      "matchPackagePatterns": ["playwright", "^@playwright"],
      "matchPackageNames": ["cross-env"]
    },
    {
      "groupName": "Markdown & syntax highlighting",
      "matchPackagePatterns": ["^rehype", "^remark", "^unist"],
      "matchPackageNames": ["unified", "shiki", "react-markdown"]
    },
    {
      "groupName": "Code formatting",
      "matchPackagePatterns": ["^prettier", "^eslint"],
      "excludePackageNames": ["eslint-config-next"]
    },
    {
      "description": "Ignore icon libraries",
      "matchPackageNames": ["lucide-react", "react-icons"],
      "enabled": false
    }
  ],
  "schedule": ["before 5am on monday"],
  "timezone": "Europe/Helsinki"
}
